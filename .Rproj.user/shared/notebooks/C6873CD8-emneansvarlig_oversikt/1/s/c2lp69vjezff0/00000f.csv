"0","#| echo: false"
"0","#| warning: false"
"0","#| message: false"
"0","library(tidyverse)"
"0","library(lubridate)"
"0","library(gt)"
"0","library(stringr)"
"0",""
"0","budsjett <- readRDS(""data/timebudsjett.rds"")"
"0",""
"0","emneansvarlige <- budsjett %>% "
"0","  #filter(str_sub(emne,1,3) %in% c(""SOS"", ""KUL"", ""SVL"", ""SVM"", ""OLA"", ""UTV"", ""SGO"", ""HGO"")) %>% "
"0","  # mutate(semester = ifelse(str_sub(aar,-1,-1) == ""V"", 1, 2),"
"0","  #        aar = str_sub(aar,1,4)) %>% "
"0","  filter( tolower(aktivitet) == ""emneansvar"") %>% "
"0","  select(aar, semester, emne, navn) %>% "
"0","  # kilde: https://stackoverflow.com/questions/52120034/extract-first-letter-in-each-word-in-r"
"0","  mutate(initialer = gsub('\\b(\\pL)\\pL{2,}|.','\\U\\1', navn, perl = TRUE)) %>%  "
"0","  mutate(navn = paste( str_sub(initialer, 1, -2), word(navn, -1))) %>%"
"0","  select(-initialer) %>% "
"0","  group_by(aar, semester, emne) %>% "
"0","  summarise(navn = paste(navn, collapse = "" & ""))  %>% "
"0","  arrange(aar, desc(semester), emne) %>%"
"0","  pivot_wider(names_from = c(aar, semester), values_from = navn, names_sort = TRUE) %>% "
"0","  ungroup()"
"0",""
"0",""
